WORK IN PROGRESS:


/script NatureSwiftHeal()


function NatureSwiftHeal()
    -- Helper function to find spell slot
    local function GetSpellSlot(spellName)
        local i = 1
        while true do
            local name = GetSpellName(i, BOOKTYPE_SPELL)
            if not name then
                break
            end
            if name == spellName then
                return i
            end
            i = i + 1
        end
        return nil
    end
    
    -- Helper function to check if Nature's Swiftness is active
    local function HasNatureSwiftness()
        local i = 0
        while true do
            local buffIndex = GetPlayerBuff(i)
            if buffIndex == -1 then
                break
            end
            local texture = GetPlayerBuffTexture(buffIndex)
            if texture and string.find(texture, "Spell_Nature_RavenForm") then
                return true
            end
            i = i + 1
        end
        return false
    end
    
    -- Check if we're in Tree of Life form (powertype should be 0 for caster form)
    local currentForm = UnitPowerType("player")
    if currentForm ~= 0 then
        return -- Don't do anything if not in caster form
    end
    
    -- Check if Nature's Swiftness is already active
    if HasNatureSwiftness() then
        -- Nature's Swiftness is active, cast Healing Touch
        cast("Healing Touch")
        return
    end
    
    -- Check if Nature's Swiftness is available (off cooldown)
    local nsSlot = GetSpellSlot("Nature's Swiftness")
    if nsSlot then
        local start, duration = GetSpellCooldown(nsSlot, BOOKTYPE_SPELL)
        if start == 0 then -- Only cast if it's off cooldown
            cast("Nature's Swiftness")
            return
        end
    end
    
    -- If we get here, Nature's Swiftness is not ready, so do nothing
    -- This prevents any form shifting or unwanted actions
end
